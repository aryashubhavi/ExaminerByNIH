<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

	<script src ="jspsych-6.1.0/jspsych.js"></script>
	<script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
	<script src="jspsych-6.1.0/plugins/jspsych-image-keyboard-response.js"></script>
	<script src="jspsych-6.1.0/plugins/jspsych-image-audio-response.js"></script>
	<link href="jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
	
</head>

<body>
	
</body>

<script>

	const saveFunction = function(data) {
        return new Promise(
            function(resolve) {
                const blob = new Blob(data, { type: 'audio/webm' });
                let url = URL.createObjectURL(blob);
                resolve(url);
            });
    };

    var timeline =[];
	var instructions_one = {
        type: 'html-keyboard-response',
        stimulus: '<p>You will now be doing the Phoenmic Fluency Task.<br>\
         You have to name as many words as you can that begin\
        <br>with a particular letter of the alphabet as quickly\
        <br>as you can. Sixty seconds are allowed for each letter.\
        <br> Names of people, places and numbers are not acceptable responses.\
        <br>Grammatical variants of previous responses \
        <br>(plurals, altered tenses, and comparatives) are also not acceptable responses.\
        <br><br> Press SPACEBAR to continue.<br></p>',
        choices: [32],

    }

    timeline.push(instructions_one);

    var question_one = {
        type: 'image-audio-response',
        stimulus: "img/line.jpeg",
        postprocessing: saveFunction,
        prompt: '<p><h1 style="color: red"> Letter: F</h1><br></p>',
        allowPlayback: true,
        buffer_length: 60000,

    }

    timeline.push(question_one);

    var question_two = {
        type: 'image-audio-response',
        stimulus: "img/line.jpeg",
        postprocessing: saveFunction,
        prompt: '<p><h1 style="color: red"> Letter: A</h1><br></p>',
        allowPlayback: true,
        buffer_length: 60000,

    }

    timeline.push(question_two);

    var question_three = {
        type: 'image-audio-response',
        stimulus: "img/line.jpeg",
        postprocessing: saveFunction,
        prompt: '<p><h1 style="color: red"> Letter: S</h1><br></p>',
        allowPlayback: true,
        buffer_length: 60000,

    }

    timeline.push(question_three);



    var instructions_two = {
        type: 'html-keyboard-response',
        stimulus: '<p>You will now be doing the Category Fluency Task.<br>\
         You have to generate as many items that you can think of that\
        <br>belong to a particular category as quickly as possible\
        <br>Sixty seconds are allowed for each category.\
        <br><br> Press SPACEBAR to continue.<br></p>',
        choices: [32],

    }

    timeline.push(instructions_two);

    var question_four = {
        type: 'image-audio-response',
        stimulus: "img/line.jpeg",
        postprocessing: saveFunction,
        prompt: '<p><h1 style="color: red"> Category: Animals</h1><br></p>',
        allowPlayback: true,
        buffer_length: 60000,

    }

    timeline.push(question_four);

    var question_five = {
        type: 'image-audio-response',
        stimulus: "img/line.jpeg",
        postprocessing: saveFunction,
        prompt: '<p><h1 style="color: red"> Category: Food</h1><br></p>',
        allowPlayback: true,
        buffer_length: 60000,

    }

    timeline.push(question_five);

    var question_six = {
        type: 'image-audio-response',
        stimulus: "img/line.jpeg",
        postprocessing: saveFunction,
        prompt: '<p><h1 style="color: red"> Letter: Fruits</h1><br></p>',
        allowPlayback: true,
        buffer_length: 60000,

    }

    timeline.push(question_six);

    var final_message = {
        type: 'html-keyboard-response',
        stimulus: '<p>The task is complete.</p>',
        choices: jsPsych.NO_KEYS,

    }

    timeline.push(final_message);


    jsPsych.init({
        timeline: timeline
    });

</script>

</html>
